<div class="page-header">
    <h2><i class="fas fa-cog"></i> Settings</h2>
    <p>Configure system preferences and application settings</p>
</div>

<div class="page-content">
    <!-- Settings Navigation Tabs -->
    <div class="settings-tabs">
        <button class="settings-tab active" data-tab="general">
            <i class="fas fa-sliders-h"></i> General
        </button>
        <button class="settings-tab" data-tab="notifications">
            <i class="fas fa-bell"></i> Notifications
        </button>
        <button class="settings-tab" data-tab="alerts">
            <i class="fas fa-exclamation-triangle"></i> Alerts
        </button>
        <button class="settings-tab" data-tab="display">
            <i class="fas fa-desktop"></i> Display
        </button>
        <button class="settings-tab" data-tab="security">
            <i class="fas fa-lock"></i> Security
        </button>
    </div>

    <!-- General Settings -->
    <div class="settings-section active" id="general-settings">
        <div class="table-card">
            <div class="table-header">
                <h3>General Settings</h3>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <label for="theme-select">Theme</label>
                        <p>Choose your preferred color theme</p>
                    </div>
                    <select id="theme-select" class="setting-input">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="auto">Auto (System)</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="language-select">Language</label>
                        <p>Select application language</p>
                    </div>
                    <select id="language-select" class="setting-input">
                        <option value="en">English</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="timezone-select">Timezone</label>
                        <p>Set your timezone for timestamps</p>
                    </div>
                    <select id="timezone-select" class="setting-input">
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">Eastern Time</option>
                        <option value="America/Los_Angeles">Pacific Time</option>
                        <option value="Europe/London">London</option>
                        <option value="Asia/Tokyo">Tokyo</option>
                        <option value="Asia/Ho_Chi_Minh">Ho Chi Minh</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="auto-refresh">Auto Refresh</label>
                        <p>Automatically refresh dashboard data</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="auto-refresh">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="refresh-interval">Refresh Interval (seconds)</label>
                        <p>How often to refresh data</p>
                    </div>
                    <input type="number" id="refresh-interval" class="setting-input" min="1" max="60" value="5">
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Settings -->
    <div class="settings-section" id="notifications-settings">
        <div class="table-card">
            <div class="table-header">
                <h3>Notification Settings</h3>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <label for="notifications-enabled">Enable Notifications</label>
                        <p>Receive notifications for security events</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="notifications-enabled" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="desktop-notifications">Desktop Notifications</label>
                        <p>Show browser desktop notifications</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="desktop-notifications" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="email-notifications">Email Notifications</label>
                        <p>Send email alerts for critical events</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="email-notifications">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="sound-alerts">Sound Alerts</label>
                        <p>Play sound for new alerts</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="sound-alerts" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="critical-only">Critical Alerts Only</label>
                        <p>Only notify for critical severity alerts</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="critical-only">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Settings -->
    <div class="settings-section" id="alerts-settings">
        <div class="table-card">
            <div class="table-header">
                <h3>Alert Thresholds</h3>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <label for="critical-threshold">Critical Threshold</label>
                        <p>Confidence level for critical alerts: <strong id="critical-value">90%</strong></p>
                    </div>
                    <input type="range" id="critical-threshold" class="setting-slider" min="0" max="100" value="90">
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="high-threshold">High Threshold</label>
                        <p>Confidence level for high alerts: <strong id="high-value">70%</strong></p>
                    </div>
                    <input type="range" id="high-threshold" class="setting-slider" min="0" max="100" value="70">
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="medium-threshold">Medium Threshold</label>
                        <p>Confidence level for medium alerts: <strong id="medium-value">50%</strong></p>
                    </div>
                    <input type="range" id="medium-threshold" class="setting-slider" min="0" max="100" value="50">
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="auto-block">Auto-Block Threats</label>
                        <p>Automatically block critical threats</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="auto-block">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="alert-retention">Alert Retention (days)</label>
                        <p>How long to keep alert history</p>
                    </div>
                    <input type="number" id="alert-retention" class="setting-input" min="7" max="365" value="30">
                </div>
            </div>
        </div>
    </div>

    <!-- Display Settings -->
    <div class="settings-section" id="display-settings">
        <div class="table-card">
            <div class="table-header">
                <h3>Display Preferences</h3>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <label for="items-per-page">Items Per Page</label>
                        <p>Number of items to show in tables</p>
                    </div>
                    <select id="items-per-page" class="setting-input">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="show-sidebar">Show Sidebar</label>
                        <p>Display sidebar with quick stats</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="show-sidebar" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="compact-mode">Compact Mode</label>
                        <p>Reduce padding and spacing</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="compact-mode">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="animations-enabled">Enable Animations</label>
                        <p>Show smooth transitions and animations</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="animations-enabled" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Security Settings -->
    <div class="settings-section" id="security-settings">
        <div class="table-card">
            <div class="table-header">
                <h3>Security Settings</h3>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <div class="setting-label">
                        <label for="session-timeout">Session Timeout (minutes)</label>
                        <p>Auto-logout after inactivity</p>
                    </div>
                    <input type="number" id="session-timeout" class="setting-input" min="5" max="120" value="30">
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="require-auth">Require Authentication</label>
                        <p>Require login to access dashboard</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="require-auth">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <label for="two-factor">Two-Factor Authentication</label>
                        <p>Enable 2FA for enhanced security</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="two-factor">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="table-card">
        <div class="table-header">
            <h3>Actions</h3>
        </div>
        <div style="padding: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
            <button class="btn-primary" id="save-settings-btn">
                <i class="fas fa-save"></i> Save Settings
            </button>
            <button class="btn-secondary" id="reset-settings-btn">
                <i class="fas fa-undo"></i> Reset to Default
            </button>
            <button class="btn-secondary" id="export-settings-btn">
                <i class="fas fa-download"></i> Export Settings
            </button>
            <button class="btn-secondary" id="import-settings-btn">
                <i class="fas fa-upload"></i> Import Settings
            </button>
            <input type="file" id="import-file-input" accept=".json" style="display: none;">
            <button class="btn-secondary" onclick="settingsManager.clearCache()">
                <i class="fas fa-trash"></i> Clear Cache
            </button>
        </div>
    </div>
</div>

<style>
.settings-tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
}

.settings-tab {
    padding: 0.75rem 1.5rem;
    border: none;
    background: var(--card-bg);
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: var(--transition);
    color: var(--text-secondary);
    font-weight: 500;
    box-shadow: var(--shadow-sm);
}

.settings-tab:hover {
    background: var(--border-color);
    color: var(--text-primary);
}

.settings-tab.active {
    background: var(--primary-color);
    color: white;
}

.settings-section {
    display: none;
}

.settings-section.active {
    display: block;
}

.settings-content {
    padding: 1.5rem;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem 0;
    border-bottom: 1px solid var(--border-color);
}

.setting-item:last-child {
    border-bottom: none;
}

.setting-label {
    flex: 1;
}

.setting-label label {
    display: block;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.setting-label p {
    margin: 0;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.setting-input {
    min-width: 200px;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 0.875rem;
}

.setting-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.setting-slider {
    min-width: 200px;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border-color);
    transition: 0.3s;
    border-radius: 26px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
    background-color: var(--success-color);
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(24px);
}

@media (max-width: 768px) {
    .setting-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .setting-input, .setting-slider {
        width: 100%;
        min-width: 100%;
    }
}
</style>

<script>
// Tab switching
document.querySelectorAll('.settings-tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
        
        tab.classList.add('active');
        const targetId = tab.dataset.tab + '-settings';
        document.getElementById(targetId).classList.add('active');
    });
});
</script>
